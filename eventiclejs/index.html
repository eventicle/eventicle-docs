<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Book Of Eventicle :: Eventicle JS</title>
    <link rel="canonical" href="https://book.eventicle.com/eventiclejs/index.html">
    <meta name="generator" content="Antora 3.1.0">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize("{ startOnLoad: true }");</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://book.eventicle.com">Eventicle JS</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="index.html">EventicleJS</a>
              <a class="navbar-item" href="../eventicle-utilities/docs/index.html">EventicleJS Utilities</a>
              <a class="navbar-item" href="../datastore-postgres/main/index.html">Postgres Datastore</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://github.com/eventicle/eventiclejs">EventicleJS Repository</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eventiclejs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">EventicleJS</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">The Book of Eventicle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/aggregate-roots.html">Aggregate Roots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/commands.html">Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/sagas.html">Sagas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/query.html">Querying Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/datastore.html">The Datastore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/observability.html">Observability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="book/testing.html">Testing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api/eventicle_eventiclejs.html">@eventicle/eventiclejs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_AggregateRoot_class.html">AggregateRoot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_Command_interface.html">Command</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_CommandIntent_interface.html">CommandIntent</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_CommandReturn_interface.html">CommandReturn</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_EncodedEvent_interface.html">EncodedEvent</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_EventAdapter_interface.html">EventAdapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_EventClientCodec_interface.html">EventClientCodec</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_EventicleEvent_interface.html">EventicleEvent</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_EventView_interface.html">EventView</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_InMemoryDatastore_class.html">InMemoryDatastore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_LocalScheduleJobRunner_class.html">LocalScheduleJobRunner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_RawEventView_interface.html">RawEventView</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api/eventicle_eventiclejs_SagaInstance_class.html">SagaInstance</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">EventicleJS</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">EventicleJS</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../eventicle-utilities/docs/index.html">EventicleJS Utilities</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../eventicle-utilities/docs/index.html">docs</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../datastore-postgres/main/index.html">Postgres Datastore</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../datastore-postgres/main/index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link is-current"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">EventicleJS</a></li>
    <li><a href="index.html">The Book of Eventicle</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/eventicle/eventiclejs/edit/master/docs/modules/ROOT/pages/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Book Of Eventicle</h1>
<div class="sect1">
<h2 id="_intro"><a class="anchor" href="#_intro"></a>Intro</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eventicle is an opinionated library for building distributed event based NodeJS applications.</p>
</div>
<div class="paragraph">
<p>It uses Domain Driven Design principles, and lets you build systems that use technologies like Kafka natively.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start"><a class="anchor" href="#_quick_start"></a>Quick Start</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">Install</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yarn add @eventicle/eventiclejs</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configure Eventicle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {
  setEventSourceName,
  eventClientOnDatastore,
  InMemoryDatastore,
  setDataStore,
  setEventClient, eventClient, EventicleEvent
} from '@eventicle/eventiclejs';


  setEventSourceName('my-cool-service');

// in service data storage abstraction. Used by the internals of eventicle, can also be used in app code
  setDataStore(new InMemoryDatastore());

// The connection to the event transport, this is in memory and stores events and state in the current datastore
  setEventClient(eventClientOnDatastore());</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Observe an event</div>
<p><em>Treat an event stream as a simple Topic, do not request any historical data.</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">  eventClient().hotStream("app.streamname", "my-consumer", async (event: EventicleEvent) =&gt; {
    console.log("An event of type " + event.type)
    console.log(event)
  }, error =&gt; {
    console.log("An error occurred");
    console.log(error)
  })</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Emit an event</div>
<p><em>Emit an event to a stream, all following Eventicle event machinery is built on this</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">  // raw event client. Used mainly for special case external integration
  await eventClient().emit([
    {
      type: "user.created",
      data: { <i class="conum" data-value="1"></i><b>(1)</b>
        userName: "Personal Person"
      }
    }
  ], "app.streamname")</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The event payload</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Fully replay an event stream</div>
<p><em>This starts at the beginning of stream <code>app.streamname</code>, and will receive all historical events, then finish.
_Mostly used for offline, batch or automation actions, such as a view upgrade or full stream schema update</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">  await eventClient().coldStream("app.streamname", async (event: EventicleEvent) =&gt; {
    console.log("An event of type " + event.type)
    console.log(event)
  }, error =&gt; {
    console.log("An error occurred");
    console.log(error)
  }, () =&gt; console.log("Event stream has fully replayed"))</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Fully replay an event stream and continue to observe</div>
<p><em>This starts at the beginning of stream <code>app.streamname</code>, and will receive all historical events. It will then continue
to observe the stream.</em>
<em>Used for most runtime stream consumption</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">  await eventClient().coldStream("app.streamname", async (event: EventicleEvent) =&gt; {
    console.log("An event of type " + event.type)
    console.log(event)
  }, error =&gt; {
    console.log("An error occurred");
    console.log(error)
  }, () =&gt; console.log("Event stream has fully replayed"))</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_next"><a class="anchor" href="#_next"></a>Next &#8230;&#8203;</h3>
<div class="paragraph">
<p>Now you&#8217;ve seen the basics of an event based system, the creation and observation of events, you can start to
add in more conceptual pieces.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Views</em>, a way to process streams of events into data structures that can be queried efficiently.</p>
</li>
<li>
<p><em>Aggregate Roots</em>, components that store state, generate events, and enforce rules about how they relate to each other. Often, implemented as a formal state machine using XState.</p>
</li>
<li>
<p><em>Commands</em>, components that record changes to the system by taking events and emitting them to streams.</p>
</li>
<li>
<p><em>Sagas</em>, event driven workflows. Implementing asynchronous business logic and integration with external systems in a way that safely isolates
them from your core application logic.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
