<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>class Saga :: Eventicle JS</title>
    <link rel="canonical" href="https://book.eventicle.com/eventiclejs/api/eventicle_eventiclejs_Saga_class.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js'; mermaid.initialize("{ startOnLoad: true }");</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://book.eventicle.com">Eventicle JS</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="../index.html">EventicleJS</a>
              <a class="navbar-item" href="../../eventicle-utilities/main/index.html">EventicleJS Utilities</a>
              <a class="navbar-item" href="../../datastore-postgres/main/index.html">Postgres Datastore</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://github.com/eventicle/eventiclejs">EventicleJS Repository</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eventiclejs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">EventicleJS</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">The Book of Eventicle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core Concepts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../book/aggregate-roots.html">Aggregate Roots</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../book/aggregate-root-xstate.html">XState Aggregate Root -  Formal State Machines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../book/commands.html">Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../book/sagas.html">Event Sagas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../book/query.html">Event Views</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../book/datastore.html">The Datastore</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How To</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../book/observability.html">Observability</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../book/testing.html">Testing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">EventicleJS</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">EventicleJS</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../eventicle-utilities/main/index.html">EventicleJS Utilities</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../eventicle-utilities/main/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../datastore-postgres/main/index.html">Postgres Datastore</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../datastore-postgres/main/index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">EventicleJS</a></li>
    <li><a href="eventicle_eventiclejs_Saga_class.html">class Saga</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/eventicle/eventiclejs/edit/master/docs/modules/api/pages/eventicle_eventiclejs_Saga_class.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">class Saga</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A saga!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_properties"><a class="anchor" href="#_properties"></a>Properties</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_errorHandler_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_errorHandler_member"></a>errorHandler</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">errorHandler: (saga: any, event: EventicleEvent, error: Error) =&gt; Promise&lt;void&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_eventHandler_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_eventHandler_member"></a>eventHandler</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">eventHandler: Map&lt;string, {
        config: HandlerConfig&lt;any, InstanceData, TimeoutNames&gt;;
        handle: (saga: SagaInstance&lt;TimeoutNames, InstanceData&gt;, event: EventicleEvent) =&gt; Promise&lt;void&gt;;
    }&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_name_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_name_member"></a>name</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">readonly name: string;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_starts_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_starts_member"></a>starts</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">starts: Map&lt;string, {
        config: StartHandlerConfig&lt;any, InstanceData, TimeoutNames&gt;;
        handle: (saga: SagaInstance&lt;TimeoutNames, InstanceData&gt;, event: EventicleEvent) =&gt; Promise&lt;void&gt;;
    }&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_streams_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_streams_member"></a>streams</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">streams: string[];</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_streamSubs_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_streamSubs_member"></a>streamSubs</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">streamSubs: EventSubscriptionControl[];</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_timerHandler_member"><a class="anchor" href="#eventicle_eventiclejs_Saga_timerHandler_member"></a>timerHandler</h3>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">timerHandler: Map&lt;TimeoutNames, {
        handle: (saga: SagaInstance&lt;TimeoutNames, InstanceData&gt;) =&gt; Promise&lt;void&gt;;
    }&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constructors"><a class="anchor" href="#_constructors"></a>Constructors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_constructor_1"><a class="anchor" href="#eventicle_eventiclejs_Saga_constructor_1"></a>(constructor)(name)</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Constructs a new instance of the <code>Saga</code> class</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parameters</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">constructor(name: string);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_methods"><a class="anchor" href="#_methods"></a>Methods</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_on_member_1"><a class="anchor" href="#eventicle_eventiclejs_Saga_on_member_1"></a>on(eventName, config, handler)</h3>
<div class="exampleblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parameters</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\~HandlerConfig&lt;T, InstanceData, TimeoutNames&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>handler</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(saga: <a href="eventicle_eventiclejs_SagaInstance_class.html" class="xref page">SagaInstance</a>&lt;TimeoutNames, InstanceData&gt;, event: T) =&gt; Promise&lt;void&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Returns</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#">Saga</a>&lt;TimeoutNames, InstanceData&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tfoot>
</table>
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">on&lt;T extends EventicleEvent&gt;(eventName: string, config: HandlerConfig&lt;T, InstanceData, TimeoutNames&gt;, handler: (saga: SagaInstance&lt;TimeoutNames, InstanceData&gt;, event: T) =&gt; Promise&lt;void&gt;): Saga&lt;TimeoutNames, InstanceData&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_onError_member_1"><a class="anchor" href="#eventicle_eventiclejs_Saga_onError_member_1"></a>onError(handler)</h3>
<div class="exampleblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parameters</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>handler</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(saga: any, event: <a href="eventicle_eventiclejs_EventicleEvent_interface.html" class="xref page">EventicleEvent</a>, error: Error) =&gt; Promise&lt;void&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Returns</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#">Saga</a>&lt;TimeoutNames, InstanceData&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tfoot>
</table>
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">onError(handler: (saga: any, event: EventicleEvent, error: Error) =&gt; Promise&lt;void&gt;): Saga&lt;TimeoutNames, InstanceData&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_onTimer_member_1"><a class="anchor" href="#eventicle_eventiclejs_Saga_onTimer_member_1"></a>onTimer(name, handle)</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Register a handler for a timer triggered saga step.</p>
</div>
<div class="paragraph">
<p>This will be called on the timer.</p>
</div>
<div class="paragraph">
<p>No event is present.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parameters</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimeoutNames</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the timer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>handle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(saga: <a href="eventicle_eventiclejs_SagaInstance_class.html" class="xref page">SagaInstance</a>&lt;TimeoutNames, InstanceData&gt;) =&gt; Promise&lt;void&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the async function to execute.</p></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Returns</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#">Saga</a>&lt;TimeoutNames, InstanceData&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tfoot>
</table>
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">onTimer(name: TimeoutNames, handle: (saga: SagaInstance&lt;TimeoutNames, InstanceData&gt;) =&gt; Promise&lt;void&gt;): Saga&lt;TimeoutNames, InstanceData&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_startOn_member_1"><a class="anchor" href="#eventicle_eventiclejs_Saga_startOn_member_1"></a>startOn(eventName, config, handler)</h3>
<div class="exampleblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parameters</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\~StartHandlerConfig&lt;T, InstanceData, TimeoutNames&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>handler</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(saga: <a href="eventicle_eventiclejs_SagaInstance_class.html" class="xref page">SagaInstance</a>&lt;TimeoutNames, InstanceData&gt;, event: T) =&gt; Promise&lt;void&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Returns</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#">Saga</a>&lt;TimeoutNames, InstanceData&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tfoot>
</table>
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">startOn&lt;T extends EventicleEvent&gt;(eventName: string, config: StartHandlerConfig&lt;T, InstanceData, TimeoutNames&gt;, handler: (saga: SagaInstance&lt;TimeoutNames, InstanceData&gt;, event: T) =&gt; Promise&lt;void&gt;): Saga&lt;TimeoutNames, InstanceData&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eventicle_eventiclejs_Saga_subscribeStreams_member_1"><a class="anchor" href="#eventicle_eventiclejs_Saga_subscribeStreams_member_1"></a>subscribeStreams(streams)</h3>
<div class="exampleblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Parameters</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string[]</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Returns</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#">Saga</a>&lt;TimeoutNames, InstanceData&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tfoot>
</table>
<div class="listingblock">
<div class="title">Signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">subscribeStreams(streams: string[]): Saga&lt;TimeoutNames, InstanceData&gt;;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
